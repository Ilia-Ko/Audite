# Audite Scripts

Present repository is a bunch of scripts that help to organize a local (or self-hosted) collection of music files. The scripts and their aims are described below in subsections.

The scripts have been developed and tested under [ArchLinux](https://archlinux.org) environment and do have external dependencies as listed below for each script.

## Audite.py

Audite is the core script of repository. It plays the major role in standard formatting and unification of music collection.

A self-hosted collection of music files may have the following structure:  
```
Base/
    /Artist, A.B./
                 /1999 - Album 1/
                                /01. Song.flac
                                /...
                                /12. Outro.flac
                                /cover.jpg
                                /Cover (larger).jpg
                                /cuesheet-for-this-album.cue
                 /2025 - Singles/...
    /Band, The C./...
    /...
    /Miscellaneous/
                  /1. Rogue.flac
                  /...
                  /9. Outcast.flac
                  /cover.jpg
                  /noname.cue
```

Audite can be applied either to an artist/band folder (see Scenario A in `--help` letter) or to a single album such as `Miscellaneous` (see Scenario B in `--help` letter).

Audite is intended to:
* format FLAC and MP3 music file names and their metadata according to cuesheet CUE files
* format track titles and album titles, primarily to force smart capitalization of words if required
* update replay-gain information in FLAC and MP3 files to normalize loudness
* convert M4A music files into FLAC
* format cover images to be roughly square, 1000px in height (original image is preserved) and embed them directly into track files
* maintain not only presence, but also uniqueness of track metadata and cover image
* rename album folders according to cuesheet metadata and flatten complex albums (e.g. `Album/CD1/*`, `Album/CD2/*` $\rightarrow$ `Album/*`)
* reconstruct missing metadata in cuesheets (or whole cuesheets when absent) guessing it from existing track metadata or explicitly user-given hints

Audite is not intended to:
* download anything from the Web (to avoid copyright issues)
* consult Web for missing metadata (to avoid further uncertainty)

Evidently, Audite cannot reconstruct completely missing or erroneous metadata. In these cases user might manually correct cuesheet files or pass some metadata to Audite directly. When cuesheet is absent itself, Audite will try to generate it consulting track built-in metadata and user-given hints. Later, user may refer to external database (e.g. https://www.discogs.com) to complete manually the cuesheet draft generated by Audite. See also API documentation at https://www.discogs.com/developers/ in case you would like to manage cuesheets automatically (like https://sourceforge.net/projects/dcue/ project). It is also up to user to provide good quality album cover images (e.g., see https://fanart.tv image library or https://covers.musichoarders.xyz cover search engine).

When a misformatted and ugly looking collection of music tracks is supplied with a proper bunch of cuesheets and cover images, Audite can suggest and carry out changes that will make an inveterate perfectionist smile!

Unfortunately, during the initial development of `Audite.py` some entropy has leaked into the source code. In spite of being chaos exterminator, `Audite.py` has become somewhat messy itself.

See `--help` text and comments within `Audite.py` for further details on script usage and implemented formatting rules.

### Dependencies

The versions of packages listed below are sufficient but not strictly necessary to run this script. It may work with older versions as well.

* [Python](https://www.python.org/) 3.13.7, including [subprocess](https://docs.python.org/3/library/subprocess.html), [functools](https://docs.python.org/3/library/functools.html), [difflib](https://docs.python.org/3/library/difflib.html) packages
* [FFmpeg](https://ffmpeg.org/) n8.0, providing `ffmpeg` and `ffprobe` utilities
* [ImageMagick](https://imagemagick.org/) 7.1.2-5, providing `magick` and `identify` utilities
* [FLAC](https://xiph.org/flac/index.html) 1.5.0, providing `metaflac` utility
* [Mutagen](https://github.com/quodlibet/mutagen) 1.47.3, providing `mid3v2` and `mutagen-inspect` utilities
* [mp3gain](https://sourceforge.net/projects/mp3gain/) 1.6.2, providing `mp3gain` utility
* [file](https://github.com/file/file) 5.46, generic Unix utility
* [which](https://www.gnu.org/software/coreutils/) 2.23, GNU core utility

## Playlister.py

Once a local/self-hosted audio library has been established and nicely formatted by Audite, one would take pleasure of listening to music tracks and sorting them into playlists. A playlist may be:
1. a folder with symbolic links pointing to favourite audiofiles
2. an M3U text file with paths to the same audiofiles

When the same playlist is represented by different means (perhaps, on different devices), it soon becomes desirable to synchronize them.

Playlister is intended to:
* **1st scenario:** read symbolic links from a directory, translate them into a listing of audiofiles and update an existing M3U list with their paths
* **2nd scenario:** read an existing M3U list, construct symbolic links to audiofiles from its entries and append these into an existing folder
* optionally sort the M3U list
* optionally rename symbolic links to get them nicely sorted by Artist, Album, Track no.
* report the counts of duplicates, broken links, etc. detected in the course of synchronization
* interactively ask for user intervention in some cases

### Dependencies

The versions of packages listed below are sufficient but not strictly necessary to run this script. It may work with older versions as well.

* [Python](https://www.python.org/) 3.13.7, including [subprocess](https://docs.python.org/3/library/subprocess.html), [functools](https://docs.python.org/3/library/functools.html) packages
* [which](https://www.gnu.org/software/coreutils/) 2.23, [ln](https://www.gnu.org/software/coreutils/) 9.8, [sort](https://www.gnu.org/software/coreutils/) 9.8 $-$ GNU core utilities